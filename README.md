# VPS Tunneling Auto-Installer Web Panel

A web-based application to automate the installation of tunneling scripts (Xray, V2Ray, Trojan) on Debian/Ubuntu VPS instances. This tool provides a user-friendly interface to connect to a VPS via SSH, execute installation scripts, and manage the installed servers.

## Features

*   **Automated Installation**: Connects to your VPS (supports Password & SSH Key auth) and installs the tunneling script automatically.
*   **Real-time Logs**: View installation logs in real-time via the web interface.
*   **License System (Rental Model)**: Installation requires a valid license token generated by the Admin. Support for 1 to 12-month durations.
*   **Auto-Expiration**: Automatically connects to the VPS and removes the script/services when the license expires.
*   **Success Feedback**: Automatically captures and displays the Admin UUID and Login URL upon successful installation.
*   **Admin Panel**: Secured dashboard to generate licenses, view managed servers, and monitor usage.
*   **Server Monitoring**: Check traffic usage (`vnstat`) and internet speed (`speedtest`) of your VPS directly from the panel.
*   **VPN Token Management**: Manage `vpanel_tokens.json` (Add/Delete VPN user tokens) remotely.
*   **Secure Storage**: VPS credentials are stored locally (`db.json`) using AES encryption.

## Prerequisites

*   Node.js (v14 or higher)
*   NPM (Node Package Manager)
*   *Optional*: Docker (for containerized deployment)

## Local Installation

1.  **Clone the Repository**
    ```bash
    git clone https://github.com/your-repo/autoscrip.git
    cd autoscrip
    ```

2.  **Install Dependencies**
    ```bash
    npm install
    ```

3.  **Configuration (Optional)**
    You can set environment variables to secure your admin panel and encryption. Create a `.env` file or export them:

    ```bash
    export PORT=3000
    export ADMIN_KEY="your_secure_admin_password"
    export ENCRYPTION_KEY="your_random_long_string_for_aes"
    ```

    *Defaults:*
    *   `PORT`: 3000
    *   `ADMIN_KEY`: `secret123`
    *   `ENCRYPTION_KEY`: `mySuperSecretKey123`

4.  **Run the Application**
    ```bash
    npm start
    ```

5.  **Access the Web Interface**
    Open your browser and navigate to `http://localhost:3000`.

## VPS One-Click Installation (Recommended)

To install the panel directly on your VPS with a single command:

```bash
bash <(curl -Ls https://raw.githubusercontent.com/2026musik-code/autoscrip/main/setup.sh)
```

This will:
1. Install Node.js and dependencies.
2. Setup the Web Panel on port 3000.
3. Generate a secure **Admin Key**.
4. Start the service automatically.

## Docker Deployment (Northflank / Railway / Etc.)

This project includes a `Dockerfile` for easy deployment.

1.  **Build the Image**
    ```bash
    docker build -t vps-installer .
    ```

2.  **Run the Container**
    ```bash
    docker run -d -p 3000:3000 \
      -e ADMIN_KEY="your_secure_admin_password" \
      -e ENCRYPTION_KEY="your_encryption_key" \
      vps-installer
    ```

### Deploying to Northflank

1.  Create a new **Service**.
2.  Select **Docker** as the build type.
3.  Connect your repository.
4.  In **Environment Variables**, add:
    *   `ADMIN_KEY`: Your desired admin password.
    *   `ENCRYPTION_KEY`: A strong random string.
5.  Expose Port **3000** (HTTP).

## Usage Guide

### 1. Generate License Token (Admin)
1.  Go to the **Admin Panel** (`/admin.html`) and login.
2.  Under **License Management**, select a duration (e.g., 1 Month) and add a note (optional).
3.  Click **GENERATE TOKEN**.
4.  Copy the token (e.g., `LIC-ABC12345`) and give it to the user.

### 2. Install Script on VPS (User)
1.  Go to the **Home Page**.
2.  Enter your VPS **IP Address**.
3.  Enter the **Username** (default: `root`).
4.  Select Authentication Type:
    *   **Password**: Enter the root password.
    *   **SSH Private Key**: Paste your private key content.
5.  Enter the **Domain Name** you want to configure (e.g., `vpn.myserver.com`).
6.  Enter the **License Token** provided by Admin.
7.  Select the **OS** (Debian/Ubuntu).
8.  Click **START INSTALLATION**.
9.  Wait for the logs to finish. A popup will appear with your **Admin UUID** and **Login URL**.

### 3. Server Management
*   **Monitoring**: Click "Monitor" on a server in Admin Panel to see live traffic and speed test results.
*   **Auto-Expiration**: The system checks daily. If a license expires, it will SSH into the VPS and **uninstall** the script automatically.
*   **VPN Tokens**: In the monitor modal, you can add or delete VPN user tokens for the VPanel.

## Security Note

*   **Credentials**: Passwords and Keys are encrypted in `db.json`. However, ensure `db.json` is not publicly accessible.
*   **Admin Key**: Change the default `ADMIN_KEY` immediately in production!

## License

ISC
